<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? | Rahul Bajaj</title>
<meta name="keywords" content="automation, configuration, openshift-admin, day2operations">
<meta name="description" content="Discover the must-do Day 2 operations for your OpenShift deployment that ensure your clusters run smoothly and efficiently. Don’t miss these essential tips to keep your system optimized and secure!">
<meta name="author" content="Rahul Bajaj">
<link rel="canonical" href="https://journalctl.org/post/day-2-operations/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://journalctl.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://journalctl.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://journalctl.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://journalctl.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://journalctl.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://journalctl.org/post/day-2-operations/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="Did You Forget these Crucial Day 2 Operations after OpenShift Deployment?" />
<meta property="og:description" content="Discover the must-do Day 2 operations for your OpenShift deployment that ensure your clusters run smoothly and efficiently. Don’t miss these essential tips to keep your system optimized and secure!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://journalctl.org/post/day-2-operations/" />
<meta property="og:image" content="https://journalctl.org/images/openshift.jpg" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-08-30T18:43:33-04:00" />
<meta property="article:modified_time" content="2024-08-30T18:43:33-04:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://journalctl.org/images/openshift.jpg" />
<meta name="twitter:title" content="Did You Forget these Crucial Day 2 Operations after OpenShift Deployment?"/>
<meta name="twitter:description" content="Discover the must-do Day 2 operations for your OpenShift deployment that ensure your clusters run smoothly and efficiently. Don’t miss these essential tips to keep your system optimized and secure!"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://journalctl.org/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Did You Forget these Crucial Day 2 Operations after OpenShift Deployment?",
      "item": "https://journalctl.org/post/day-2-operations/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Did You Forget these Crucial Day 2 Operations after OpenShift Deployment?",
  "name": "Did You Forget these Crucial Day 2 Operations after OpenShift Deployment?",
  "description": "Discover the must-do Day 2 operations for your OpenShift deployment that ensure your clusters run smoothly and efficiently. Don’t miss these essential tips to keep your system optimized and secure!",
  "keywords": [
    "automation", "configuration", "openshift-admin", "day2operations"
  ],
  "articleBody": "Day 2 operations come into play after the initial installation of an OpenShift cluster. These operations involve a series of essential settings and configurations that prepare your cluster for developers’ deployments. By performing these tasks, you ensure that the cluster remains healthy, secure, and efficient. Key activities include monitoring and logging, scaling resources, managing backups and recovery, enhancing security, optimizing resource allocation, and maintaining network configurations. These steps are crucial for maintaining the overall stability and performance of your OpenShift environment, making it ready for seamless development and deployment activities.\nFive Essential Day 2 Operations In this blog, we are diving into five essential Day 2 operations that every OpenShift admin should implement after completing their cluster installation. These tips will help you optimize and maintain your OpenShift environment like a pro!\nDisabling the self provisioning in OpenShift 4 OpenShift gives admins the power to control who can access resources and how they do it. This is managed through the RBAC (Role-Based Access Control) mechanism. One handy feature is self-provisioners, which lets you decide which groups or users can create new projects. However, as a Day 2 operation, it is wise to restrict developers from provisioning new projects without oversight. Disabling self-provisioners offers several benefits: it helps you maintain control over resource creation, monitor usage, and prevent resource limits from being exceeded, which could negatively impact other namespaces.\nWhen you set up a new OpenShift cluster, the default configuration for self-provisioners is a clusterrolebinding that grants the system:authenticated:oauth group the ability to create new projects. In other words, any user who can log in with their OAuth credentials can start their own projects within the cluster.\n$ oc describe clusterrolebinding.rbac self-provisioners Name: self-provisioners Labels: Annotations: rbac.authorization.kubernetes.io/autoupdate: true Role: Kind: ClusterRole Name: self-provisioner Subjects: Kind Name Namespace ---- ---- --------- Group system:authenticated:oauth To prevent self-provisioning in your OpenShift cluster, you’ll need to make two key changes to the clusterrolebinding:\nRemove the Group: Delete the system:authenticated:oauth group from the subjects field of the clusterrolebinding and set it to null. You can do this by: $ oc patch clusterrolebinding.rbac self-provisioners -p '{\"subjects\": null}' Update the Annotation: Update the annotation rbac.authorization.kubernetes.io/autoupdate: \"false\" to prevent the clusterrolebinding from resetting to its default settings during automatic updates. $ oc edit clusterrolebinding.rbac self-provisioners The final yaml for the clusterrolebinding should look like this:\n$ oc get clusterrolebinding self-provisioners -o yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: annotations: rbac.authorization.kubernetes.io/autoupdate: \"false\" name: self-provisioners roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: self-provisioner $ oc describe clusterrolebinding/self-provisioners Name: self-provisioners Labels: Annotations: rbac.authorization.kubernetes.io/autoupdate: false Role: Kind: ClusterRole Name: self-provisioner Subjects: Kind Name Namespace ---- ---- --------- You can also find the openshift documentation about this topic here.\nOptimizing node configurations with maxPods and podsPerCore Efficiently managing resources is crucial for maintaining a stable and performant OpenShift cluster. Two key parameters in the KubeletConfig that play a significant role in this are maxPods and podsPerCore.\nmaxPods: This parameter sets a hard limit on the number of pods that can run on a node. For example, setting maxPods to 250 means no more than 250 pods can be scheduled on that node, regardless of its capacity. podsPerCore: This parameter limits the number of pods based on the number of CPU cores available on the node. For instance, if podsPerCore is set to 15 and the node has 12 CPU cores, the maximum number of pods would be 180 (12 cores * 15 pods per core). To determine the appropriate values for these parameters, consider the following:\nNode Specifications: Check the number of CPU cores and total memory available on your nodes. For example, if a node has 12 CPUs and podsPerCore is set to 15, the node can handle up to 180 pods. Workload Characteristics: Evaluate the resource demands of your typical workloads. If your pods are resource-intensive, you might need to lower the podsPerCore value to prevent resource contention. Performance Monitoring: Continuously monitor the performance and stability of your nodes. High pod density can lead to issues such as CPU throttling, memory pressure, and network congestion. Here is an example of how you might configure these parameters in a KubeletConfig:\napiVersion: machineconfiguration.openshift.io/v1 kind: KubeletConfig metadata: name: set-max-pods spec: autoSizingReserved: true kubeletConfig: maxPods: 250 podsPerCore: 15 streamingConnectionIdleTimeout: 240m machineConfigPoolSelector: matchLabels: custom-kubelet: enabled In this example, the node can run up to 250 pods, but if it has 12 CPU cores, the limit would be 180 pods (12 cores * 15 pods per core). Side note: to apply the above configuration, all mcps should have the label custom-kubelet: enabled.\nAnother important factor to consider when determining the values for maxPods and podsPerCore is the memory requirements. To calculate the memory needed for your node, you should take into account the average memory usage per pod. For example, if each pod uses 200 MiB on average and the node can support 180 pods, the total memory requirement would be:\nTotal Memory = 200MiB * 180 = 36,000 MiB\nAdding a buffer for system overhead and unexpected spikes is also recommended. You can read more information about this topic here.\nSync time for all OpenShift nodes with Chronyd Time synchronization is crucial for maintaining the accuracy and reliability of various operations in your cluster, such as cron jobs and logging. Chrony, a Network Time Protocol (NTP) client and server, excels in synchronizing the system clock faster and more accurately.\nImagine you have three Machine Config Pools (MCPs): one for master nodes, one for worker nodes, and one for infrastructure nodes. Each of these MCPs needs the Chrony Machine Config (MC) applied to them. To achieve this, we will create three Machine Configs to configure Chrony on all nodes within the MCPs.\nBefore applying the Machine Configs, it’s crucial to pause the MCPs. Here is how you can do it:\n$ oc edit mcp master spec: ... paused: true ... Repeat this for each MCP to ensure they are paused.\nNext, we will create a Butane config file to configure Chrony. Here is an example:\nvariant: openshift version: 4.16.0 metadata: name: 99-worker-custom labels: machineconfiguration.openshift.io/role: worker openshift: kernel_arguments: - loglevel=7 storage: files: - path: /etc/chrony.conf mode: 0420 filesystem: root overwrite: true contents: inline: | server 0.rhel.server.ntp.org iburst maxpoll 10 keyfile /etc/chrony.keys local stratum 10 driftfile /var/lib/chrony/drift mazupdateskew 100.0 makestep 1.0 3 rtcsync logdir /var/log/chrony Save this file as 99-worker-custom.bu. The prefix 99 ensures that this configuration is applied after all other configurations, as OpenShift processes MachineConfigs in lexicographical order.\nDownload the Butane binary and make it executable:\n$ curl https://mirror.openshift.com/pub/openshift-v4/clients/butane/latest/butane --output butane $ chmod +x butane Now, we need to apply the Machine Configs for the master, worker, and infra roles. First, check the roles labeled on nodes using:\n$ oc get nodes Then, run the following script to create and apply the Machine Configs:\nfor i in master worker infra do echo $i cp -a 99-worker-custom.bu 99-mc-chrony-$i.bu sed -i \"s/worker/$i/g\" 99-mc-chrony-$i.bu butane 99-mc-chrony-$i.bu -o 99-mc-chrony-$i.yaml oc create -f 99-mc-chrony-$i.yaml done This script customizes the Butane config for each role and applies it to the respective nodes.\nRead more about this day2 operation here.\nUpdate the .apps Wild Card Certificate By default, OpenShift uses a self-signed wildcard certificate for applications under the .apps sub-domain. To enhance security, you can replace this with a certificate from a public CA. Follow these steps to ensure a smooth transition:\nSteps:\nCreate a ConfigMap for the Root CA Certificate: $ oc create configmap custom-ca --from-file=ca-bundle.crt= -n openshift-config Replace with the path to your root CA certificate file. This step ensures that the root CA certificate is recognized by the cluster.\nUpdate the Cluster-Wide Proxy Configuration: This command updates the cluster-wide proxy configuration to trust the new CA certificate.\n$ oc patch proxy/cluster --type=merge --patch='{\"spec\":{\"trustedCA\":{\"name\":\"custom-ca\"}}}' Generate a Certificate Signing Request (CSR): $ openssl req -new -newkey rsa:2048 -nodes -keyout mykey.key -out mycsr.csr This command generates a new private key and CSR. You will need to submit the CSR your organizations CA to obtain the signed certificate.\nSubmit the CSR to your organizations CA to obtain the signed certificate.\nPro Tip Verify that the Key and Certificate Have the Same Modulus:\nEnsure that the MD5 checksums match. If they do, the key and certificate are a pair.\n$ openssl rsa -noout -modulus -in mykey.key | openssl md5 $ openssl x509 -noout -modulus -in mycert.crt | openssl md5 Create a Secret in OpenShift: This command creates a secret that stores your certificate and key.\n$ oc create secret tls mysecret --cert=mycert.crt --key=mykey.key -n openshift-ingress Update the Ingress Controller: $ oc patch ingresscontroller default -n openshift-ingress-operator --type=merge -p '{\"spec\":{\"defaultCertificate\":{\"name\":\"mysecret\"}}}' This updates the ingress controller to use your new certificate.\nBy following these steps, you can replace the default ingress certificate in OpenShift with a certificate from your organizations CA, ensuring enhanced security for your applications. Remember to verify that your key and certificate match by checking their modulus, and update the cluster-wide proxy configuration to trust the new CA certificate.\nYou can read more about this operation here\nEtcd Encryption etcd serves as the primary datastore for Kubernetes, storing all cluster state data, including configuration details, metadata, and the current state of the cluster. This makes etcd the single source of truth for Kubernetes clusters. Its strong consistency guarantees ensure that data is reliably stored and accessible, even in the event of machine failures.\nBy default, etcd data is not encrypted, which can pose a security risk if sensitive data is exposed. Enabling etcd encryption adds an additional layer of security by encrypting the data stored in etcd. This is particularly important for protecting sensitive resources such as secrets, config maps, and tokens.\nHow to Enable etcd Encryption?\nModify the APIServer Object: $ oc edit apiserver Set the encryption field type to aescbc:\nspec: encryption: type: aescbc This uses AES-CBC with PKCS#7 padding and a 32-byte key for encryption.\nVerify Encryption: Check the status of the OpenShift API server to ensure resources are encrypted: oc get openshiftapiserver -o=jsonpath='{range .items[0].status.conditions[?(@.type==\"Encrypted\")]}{.reason}{\"\\n\"}{.message}{\"\\n\"}' The output should show EncryptionCompleted if successful.\n",
  "wordCount" : "1660",
  "inLanguage": "en",
  "image":"https://journalctl.org/images/openshift.jpg","datePublished": "2024-08-30T18:43:33-04:00",
  "dateModified": "2024-08-30T18:43:33-04:00",
  "author":{
    "@type": "Person",
    "name": "Rahul Bajaj"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://journalctl.org/post/day-2-operations/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rahul Bajaj",
    "logo": {
      "@type": "ImageObject",
      "url": "https://journalctl.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://journalctl.org/" accesskey="h" title="Rahul Bajaj (Alt + H)">Rahul Bajaj</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://journalctl.org/post" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://journalctl.org/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://journalctl.org/archives" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://journalctl.org/search" title="Search 🔍">
                    <span>Search 🔍</span>
                </a>
            </li>
            <li>
                <a href="https://journalctl.org/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://journalctl.org/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://journalctl.org/">Home</a>&nbsp;»&nbsp;<a href="https://journalctl.org/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Did You Forget these Crucial Day 2 Operations after OpenShift Deployment?
    </h1>
    <div class="post-description">
      Discover the must-do Day 2 operations for your OpenShift deployment that ensure your clusters run smoothly and efficiently. Don’t miss these essential tips to keep your system optimized and secure!
    </div>
    <div class="post-meta"><span title='2024-08-30 18:43:33 -0400 EDT'>August 30, 2024</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Rahul Bajaj&nbsp;|&nbsp;<a href="https://github.com/rabajaj0509/personal-website/blob/master/content/post/day-2-operations.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
<figure class="entry-cover"><img loading="eager" src="https://journalctl.org/images/openshift.jpg" alt="Openshift Container Platform">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#five-essential-day-2-operations" aria-label="Five Essential Day 2 Operations">Five Essential Day 2 Operations</a><ul>
                        
                <li>
                    <a href="#disabling-the-self-provisioning-in-openshift-4" aria-label="Disabling the self provisioning in OpenShift 4">Disabling the self provisioning in OpenShift 4</a></li>
                <li>
                    <a href="#optimizing-node-configurations-with-maxpods-and-podspercore" aria-label="Optimizing node configurations with maxPods and podsPerCore">Optimizing node configurations with maxPods and podsPerCore</a></li>
                <li>
                    <a href="#sync-time-for-all-openshift-nodes-with-chronyd" aria-label="Sync time for all OpenShift nodes with Chronyd">Sync time for all OpenShift nodes with Chronyd</a></li>
                <li>
                    <a href="#update-the-apps-wild-card-certificate" aria-label="Update the .apps Wild Card Certificate">Update the .apps Wild Card Certificate</a></li>
                <li>
                    <a href="#etcd-encryption" aria-label="Etcd Encryption">Etcd Encryption</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Day 2 operations come into play after the initial installation of an OpenShift cluster. These operations involve a series of essential settings and configurations that prepare your cluster for developers&rsquo; deployments. By performing these tasks, you ensure that the cluster remains healthy, secure, and efficient. Key activities include monitoring and logging, scaling resources, managing backups and recovery, enhancing security, optimizing resource allocation, and maintaining network configurations. These steps are crucial for maintaining the overall stability and performance of your OpenShift environment, making it ready for seamless development and deployment activities.</p>
<h2 id="five-essential-day-2-operations">Five Essential Day 2 Operations<a hidden class="anchor" aria-hidden="true" href="#five-essential-day-2-operations">#</a></h2>
<p>In this blog, we are diving into five essential Day 2 operations that every OpenShift admin should implement after completing their cluster installation. These tips will help you optimize and maintain your OpenShift environment like a pro!</p>
<h3 id="disabling-the-self-provisioning-in-openshift-4">Disabling the self provisioning in OpenShift 4<a hidden class="anchor" aria-hidden="true" href="#disabling-the-self-provisioning-in-openshift-4">#</a></h3>
<p>OpenShift gives admins the power to control who can access resources and how they do it. This is managed through the RBAC (Role-Based Access Control) mechanism. One handy feature is self-provisioners, which lets you decide which groups or users can create new projects. However, as a Day 2 operation, it is wise to restrict developers from provisioning new projects without oversight. Disabling self-provisioners offers several benefits: it helps you maintain control over resource creation, monitor usage, and prevent resource limits from being exceeded, which could negatively impact other namespaces.</p>
<p>When you set up a new OpenShift cluster, the default configuration for self-provisioners is a clusterrolebinding that grants the <code>system:authenticated:oauth</code> group the ability to create new projects. In other words, any user who can log in with their OAuth credentials can start their own projects within the cluster.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc describe clusterrolebinding.rbac self-provisioners
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Name:         self-provisioners
</span></span><span class="line"><span class="cl">Labels:       &lt;none&gt;
</span></span><span class="line"><span class="cl">Annotations:  rbac.authorization.kubernetes.io/autoupdate: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">Role:
</span></span><span class="line"><span class="cl">  Kind:  ClusterRole
</span></span><span class="line"><span class="cl">  Name:  self-provisioner
</span></span><span class="line"><span class="cl">Subjects:
</span></span><span class="line"><span class="cl">  Kind   Name                        Namespace
</span></span><span class="line"><span class="cl">  ----   ----                        ---------
</span></span><span class="line"><span class="cl">  Group  system:authenticated:oauth
</span></span></code></pre></div><p>To prevent self-provisioning in your OpenShift cluster, you’ll need to make two key changes to the clusterrolebinding:</p>
<ul>
<li>Remove the Group: Delete the <code>system:authenticated:oauth</code> group from the subjects field of the clusterrolebinding and set it to <em>null</em>. You can do this by:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc patch clusterrolebinding.rbac self-provisioners -p <span class="s1">&#39;{&#34;subjects&#34;: null}&#39;</span>
</span></span></code></pre></div></li>
<li>Update the Annotation: Update the annotation <code>rbac.authorization.kubernetes.io/autoupdate: &quot;false&quot;</code> to prevent the clusterrolebinding from resetting to its default settings during automatic updates.
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc edit clusterrolebinding.rbac self-provisioners
</span></span></code></pre></div></li>
</ul>
<p>The final yaml for the clusterrolebinding should look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="l">$ oc get clusterrolebinding self-provisioners -o yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">rbac.authorization.k8s.io/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ClusterRoleBinding</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rbac.authorization.kubernetes.io/autoupdate</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;false&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">self-provisioners</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">roleRef</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l">rbac.authorization.k8s.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ClusterRole</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">self-provisioner</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$  oc describe clusterrolebinding/self-provisioners
</span></span><span class="line"><span class="cl">Name:         self-provisioners
</span></span><span class="line"><span class="cl">Labels:       &lt;none&gt;
</span></span><span class="line"><span class="cl">Annotations:  rbac.authorization.kubernetes.io/autoupdate: <span class="nb">false</span>
</span></span><span class="line"><span class="cl">Role:
</span></span><span class="line"><span class="cl">  Kind:  ClusterRole
</span></span><span class="line"><span class="cl">  Name:  self-provisioner
</span></span><span class="line"><span class="cl">Subjects:
</span></span><span class="line"><span class="cl">  Kind  Name  Namespace
</span></span><span class="line"><span class="cl">  ----  ----  ---------
</span></span></code></pre></div><p>You can also find the openshift documentation about this topic <a href="https://docs.openshift.com/container-platform/4.16/applications/projects/configuring-project-creation.html#disabling-project-self-provisioning_configuring-project-creation">here</a>.</p>
<h3 id="optimizing-node-configurations-with-maxpods-and-podspercore">Optimizing node configurations with maxPods and podsPerCore<a hidden class="anchor" aria-hidden="true" href="#optimizing-node-configurations-with-maxpods-and-podspercore">#</a></h3>
<p>Efficiently managing resources is crucial for maintaining a stable and performant OpenShift cluster. Two key parameters in the KubeletConfig that play a significant role in this are <code>maxPods</code> and <code>podsPerCore</code>.</p>
<ul>
<li><em>maxPods</em>:  This parameter sets a hard limit on the number of pods that can run on a node. For example, setting maxPods to 250 means no more than 250 pods can be scheduled on that node, regardless of its capacity.</li>
<li><em>podsPerCore</em>: This parameter limits the number of pods based on the number of CPU cores available on the node. For instance, if podsPerCore is set to 15 and the node has 12 CPU cores, the maximum number of pods would be 180 (12 cores * 15 pods per core).</li>
</ul>
<p>To determine the appropriate values for these parameters, consider the following:</p>
<ul>
<li><em>Node Specifications</em>: Check the number of CPU cores and total memory available on your nodes. For example, if a node has 12 CPUs and podsPerCore is set to 15, the node can handle up to 180 pods.</li>
<li><em>Workload Characteristics</em>: Evaluate the resource demands of your typical workloads. If your pods are resource-intensive, you might need to lower the podsPerCore value to prevent resource contention.</li>
<li><em>Performance Monitoring</em>: Continuously monitor the performance and stability of your nodes. High pod density can lead to issues such as CPU throttling, memory pressure, and network congestion.</li>
</ul>
<p>Here is an example of how you might configure these parameters in a KubeletConfig:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">machineconfiguration.openshift.io/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">KubeletConfig</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">set-max-pods</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">autoSizingReserved</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">kubeletConfig</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxPods</span><span class="p">:</span><span class="w"> </span><span class="m">250</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">podsPerCore</span><span class="p">:</span><span class="w"> </span><span class="m">15</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">streamingConnectionIdleTimeout</span><span class="p">:</span><span class="w"> </span><span class="l">240m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">machineConfigPoolSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">custom-kubelet</span><span class="p">:</span><span class="w"> </span><span class="l">enabled</span><span class="w">
</span></span></span></code></pre></div><p>In this example, the node can run up to 250 pods, but if it has 12 CPU cores, the limit would be 180 pods (12 cores * 15 pods per core). Side note: to apply the above configuration, all mcps should have the label <code>custom-kubelet: enabled</code>.</p>
<p>Another important factor to consider when determining the values for maxPods and podsPerCore is the memory requirements. To calculate the memory needed for your node, you should take into account the average memory usage per pod. For example, if each pod uses 200 MiB on average and the node can support 180 pods, the total memory requirement would be:</p>
<p>Total Memory = 200MiB * 180 = 36,000 MiB</p>
<p>Adding a buffer for system overhead and unexpected spikes is also recommended. You can read more information about this topic <a href="https://docs.openshift.com/container-platform/4.16/nodes/nodes/nodes-nodes-managing-max-pods.html">here</a>.</p>
<h3 id="sync-time-for-all-openshift-nodes-with-chronyd">Sync time for all OpenShift nodes with Chronyd<a hidden class="anchor" aria-hidden="true" href="#sync-time-for-all-openshift-nodes-with-chronyd">#</a></h3>
<p>Time synchronization is crucial for maintaining the accuracy and reliability of various operations in your cluster, such as cron jobs and logging. Chrony, a Network Time Protocol (NTP) client and server, excels in synchronizing the system clock faster and more accurately.</p>
<p>Imagine you have three Machine Config Pools (MCPs): one for master nodes, one for worker nodes, and one for infrastructure nodes. Each of these MCPs needs the Chrony Machine Config (MC) applied to them. To achieve this, we will create three Machine Configs to configure Chrony on all nodes within the MCPs.</p>
<p>Before applying the Machine Configs, it’s crucial to pause the MCPs. Here is how you can do it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc edit mcp master
</span></span><span class="line"><span class="cl">spec:
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  paused: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">  ...
</span></span></code></pre></div><p>Repeat this for each MCP to ensure they are paused.</p>
<p>Next, we will create a Butane config file to configure Chrony. Here is an example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">variant</span><span class="p">:</span><span class="w"> </span><span class="l">openshift</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">4.16.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="m">99</span>-<span class="l">worker-custom</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">machineconfiguration.openshift.io/role</span><span class="p">:</span><span class="w"> </span><span class="l">worker</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">openshift</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">kernel_arguments</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">loglevel=7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/etc/chrony.conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="m">0420</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">filesystem</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">overwrite</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">contents</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">inline</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          server 0.rhel.server.ntp.org iburst maxpoll 10
</span></span></span><span class="line"><span class="cl"><span class="sd">          keyfile /etc/chrony.keys
</span></span></span><span class="line"><span class="cl"><span class="sd">          local stratum 10
</span></span></span><span class="line"><span class="cl"><span class="sd">          driftfile /var/lib/chrony/drift
</span></span></span><span class="line"><span class="cl"><span class="sd">          mazupdateskew 100.0
</span></span></span><span class="line"><span class="cl"><span class="sd">          makestep 1.0 3
</span></span></span><span class="line"><span class="cl"><span class="sd">          rtcsync
</span></span></span><span class="line"><span class="cl"><span class="sd">          logdir /var/log/chrony</span><span class="w">          
</span></span></span></code></pre></div><p>Save this file as <code>99-worker-custom.bu</code>. The prefix <code>99</code> ensures that this configuration is applied after all other configurations, as OpenShift processes MachineConfigs in lexicographical order.</p>
<p>Download the Butane binary and make it executable:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl https://mirror.openshift.com/pub/openshift-v4/clients/butane/latest/butane --output butane
</span></span><span class="line"><span class="cl">$ chmod +x butane
</span></span></code></pre></div><p>Now, we need to apply the Machine Configs for the master, worker, and infra roles. First, check the roles labeled on nodes using:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc get nodes
</span></span></code></pre></div><p>Then, run the following script to create and apply the Machine Configs:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">for</span> i in master worker infra
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl">  cp -a 99-worker-custom.bu 99-mc-chrony-<span class="nv">$i</span>.bu
</span></span><span class="line"><span class="cl">  sed -i <span class="s2">&#34;s/worker/</span><span class="nv">$i</span><span class="s2">/g&#34;</span> 99-mc-chrony-<span class="nv">$i</span>.bu
</span></span><span class="line"><span class="cl">  butane 99-mc-chrony-<span class="nv">$i</span>.bu -o 99-mc-chrony-<span class="nv">$i</span>.yaml
</span></span><span class="line"><span class="cl">  oc create -f 99-mc-chrony-<span class="nv">$i</span>.yaml
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>This script customizes the Butane config for each role and applies it to the respective nodes.</p>
<p>Read more about this day2 operation <a href="https://docs.openshift.com/container-platform/4.16/machine_configuration/machine-configs-configure.html#installation-special-config-chrony_machine-configs-configure">here</a>.</p>
<h3 id="update-the-apps-wild-card-certificate">Update the .apps Wild Card Certificate<a hidden class="anchor" aria-hidden="true" href="#update-the-apps-wild-card-certificate">#</a></h3>
<p>By default, OpenShift uses a self-signed wildcard certificate for applications under the <code>.apps</code> sub-domain. To enhance security, you can replace this with a certificate from a public CA. Follow these steps to ensure a smooth transition:</p>
<p><em>Steps:</em></p>
<ul>
<li>Create a ConfigMap for the Root CA Certificate:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc create configmap custom-ca --from-file<span class="o">=</span>ca-bundle.crt<span class="o">=</span>&lt;/path/to/example-ca.crt&gt; -n openshift-config
</span></span></code></pre></div><p>Replace <code>&lt;/path/to/example-ca.crt&gt;</code> with the path to your root CA certificate file. This step ensures that the root CA certificate is recognized by the cluster.</p>
<ul>
<li>Update the Cluster-Wide Proxy Configuration:</li>
</ul>
<p>This command updates the cluster-wide proxy configuration to trust the new CA certificate.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc patch proxy/cluster --type<span class="o">=</span>merge --patch<span class="o">=</span><span class="s1">&#39;{&#34;spec&#34;:{&#34;trustedCA&#34;:{&#34;name&#34;:&#34;custom-ca&#34;}}}&#39;</span>
</span></span></code></pre></div><ul>
<li>Generate a Certificate Signing Request (CSR):</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ openssl req -new -newkey rsa:2048 -nodes -keyout mykey.key -out mycsr.csr
</span></span></code></pre></div><p>This command generates a new private key and CSR. You will need to submit the CSR your organizations CA to obtain the signed certificate.</p>
<ul>
<li>
<p>Submit the CSR to your organizations CA to obtain the signed certificate.</p>
</li>
<li>
<p><strong>Pro Tip</strong> Verify that the Key and Certificate Have the Same Modulus:</p>
</li>
</ul>
<p>Ensure that the MD5 checksums match. If they do, the key and certificate are a pair.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ openssl rsa -noout -modulus -in mykey.key <span class="p">|</span> openssl md5
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ openssl x509 -noout -modulus -in mycert.crt <span class="p">|</span> openssl md5
</span></span></code></pre></div><ul>
<li>Create a Secret in OpenShift:</li>
</ul>
<p>This command creates a secret that stores your certificate and key.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc create secret tls mysecret --cert<span class="o">=</span>mycert.crt --key<span class="o">=</span>mykey.key -n openshift-ingress
</span></span></code></pre></div><ul>
<li>Update the Ingress Controller:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc patch ingresscontroller default -n openshift-ingress-operator --type<span class="o">=</span>merge -p <span class="s1">&#39;{&#34;spec&#34;:{&#34;defaultCertificate&#34;:{&#34;name&#34;:&#34;mysecret&#34;}}}&#39;</span>
</span></span></code></pre></div><p>This updates the ingress controller to use your new certificate.</p>
<p>By following these steps, you can replace the default ingress certificate in OpenShift with a certificate from your organizations CA, ensuring enhanced security for your applications. Remember to verify that your key and certificate match by checking their modulus, and update the cluster-wide proxy configuration to trust the new CA certificate.</p>
<p>You can read more about this operation <a href="https://docs.openshift.com/container-platform/4.16/security/certificates/replacing-default-ingress-certificate.html">here</a></p>
<h3 id="etcd-encryption">Etcd Encryption<a hidden class="anchor" aria-hidden="true" href="#etcd-encryption">#</a></h3>
<p>etcd serves as the primary datastore for Kubernetes, storing all cluster state data, including configuration details, metadata, and the current state of the cluster. This makes etcd the single source of truth for Kubernetes clusters. Its strong consistency guarantees ensure that data is reliably stored and accessible, even in the event of machine failures.</p>
<p>By default, etcd data is not encrypted, which can pose a security risk if sensitive data is exposed. Enabling etcd encryption adds an additional layer of security by encrypting the data stored in etcd. This is particularly important for protecting sensitive resources such as secrets, config maps, and tokens.</p>
<p>How to Enable etcd Encryption?</p>
<ul>
<li>Modify the APIServer Object:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ oc edit apiserver
</span></span></code></pre></div><p>Set the encryption field type to aescbc:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">encryption</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">aescbc</span><span class="w">
</span></span></span></code></pre></div><p>This uses AES-CBC with PKCS#7 padding and a 32-byte key for encryption.</p>
<ul>
<li>Verify Encryption: Check the status of the OpenShift API server to ensure resources are encrypted:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">oc get openshiftapiserver -o<span class="o">=</span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{range .items[0].status.conditions[?(@.type==&#34;Encrypted&#34;)]}{.reason}{&#34;\n&#34;}{.message}{&#34;\n&#34;}&#39;</span>
</span></span></code></pre></div><p>The output should show EncryptionCompleted if successful.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://journalctl.org/tags/automation/">Automation</a></li>
      <li><a href="https://journalctl.org/tags/configuration/">Configuration</a></li>
      <li><a href="https://journalctl.org/tags/openshift-admin/">Openshift-Admin</a></li>
      <li><a href="https://journalctl.org/tags/day2operations/">Day2operations</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://journalctl.org/post/compliance-operator/">
    <span class="title">Next »</span>
    <br>
    <span>Navigating OpenShift’s Compliance Operator</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on x"
            href="https://x.com/intent/tweet/?text=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f&amp;url=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f&amp;hashtags=automation%2cconfiguration%2copenshift-admin%2cday2operations">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f&amp;title=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f&amp;summary=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f&amp;source=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f&title=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on whatsapp"
            href="https://api.whatsapp.com/send?text=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f%20-%20https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on telegram"
            href="https://telegram.me/share/url?text=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f&amp;url=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Did You Forget these Crucial Day 2 Operations after OpenShift Deployment? on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Did%20You%20Forget%20these%20Crucial%20Day%202%20Operations%20after%20OpenShift%20Deployment%3f&u=https%3a%2f%2fjournalctl.org%2fpost%2fday-2-operations%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://journalctl.org/">Rahul Bajaj</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
